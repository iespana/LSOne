/*

	Incident No.	: ONE-1025 Form profiles - default system profile
	Responsible		: Adrian Chiorean
	Sprint			: Bestå
	Date created	: 10.03.2017

	Description		: Add IsSystemLayout column to POSISFORMLAYOUT, IsSystemProfileLine to POSFORMPROFILELINE
*/

USE LSPOSNET

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME = 'ISSYSTEMLAYOUT' AND TABLE_NAME = 'POSISFORMLAYOUT')
BEGIN
	ALTER TABLE POSISFORMLAYOUT
	ADD ISSYSTEMLAYOUT BIT NOT NULL DEFAULT(0)
END
GO

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME = 'ISSYSTEMPROFILELINE' AND TABLE_NAME = 'POSFORMPROFILELINES')
BEGIN
	ALTER TABLE POSFORMPROFILELINES
	ADD ISSYSTEMPROFILELINE BIT NOT NULL DEFAULT(0)
END
GO

IF NOT EXISTS(SELECT 1 FROM POSFORMPROFILELINES WHERE PROFILEID = '0C7D790C-096C-4ED5-94B5-6B9814C87A46' AND ISSYSTEMPROFILELINE = 1)
BEGIN
	UPDATE POSFORMPROFILELINES SET ISSYSTEMPROFILELINE = 1 
	WHERE PROFILEID = '0C7D790C-096C-4ED5-94B5-6B9814C87A46'
	AND FORMTYPEID IN ('CFFCC36A-7D9A-4CE6-9FDC-F175466CAA63',
					   '48B211BB-0A2C-4A26-A798-19164A692249',
					   '3AA6EAF9-912B-4261-A2E2-7711E727A4A4',
					   'B91FF052-1464-4E51-90BA-F3E9B843DB0B',
					   '39DDBA4E-F7C6-4DC6-BC44-895E729D9112',
					   '72CB906C-D2D3-41C6-965A-0F7948420DBF',
					   '9662E62D-55DF-40CF-B7E2-907FB770D60B',
					   '39C74CF0-8FD8-432F-A91A-B66176CF9545',
					   '1F7EAB75-B191-4352-B659-9335219357F9',
					   '3DB410F5-F6D8-4D47-B50D-7CE6C375E889',
					   '6D027264-2EFD-49DF-BDAB-101D57098483',
					   '72280C3E-3B01-46F8-A032-52240458470E',
					   'E00D900D-94BB-4A80-A394-25E9AF0CE5B0',
					   '03554C15-993B-45B4-B5E8-54A68F96097A',
					   '4BA1C3BE-D108-4CD2-A6FA-585AF7862BFF',
					   'B8C00223-B8B6-4294-9224-91027E2DC322',
					   '4F5DB772-1337-4104-A294-13590928BB1D',
					   'F244F70F-03A4-4801-8DE7-6523B6B0DF84',
					   'E1DB5F02-DC08-4A7B-AD18-6650F8ABB604',
					   '82EE8F63-DC93-4134-BDBA-F3B3F20570B5',
					   '89D761C2-2F12-47C9-9FD0-920A3920035B',
					   'ED519FB2-E0B5-40F5-8314-F43A4F39D980',
					   'A837EA63-94F5-41A3-A0EC-CC4E2AE73705',
					   '46532F54-48FC-41E9-83B9-0B159FDE0251',
					   'A9C42388-A17C-4051-AAE6-36FD21D69D6C',
					   'D69ECDC4-9773-4826-8765-E6ECD1B87A11')
END
GO